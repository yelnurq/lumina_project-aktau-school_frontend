import { useEffect, useState } from "react";
import Header from "../../../components/Header";
import styles from "./Committee.module.css";
import { Link } from "react-router-dom";
import { FaFileAlt, FaComments, FaCheckCircle } from "react-icons/fa";

// 1. Объект с переводами
const translations = {
  ru: {
    breadcrumbs: { home: "Главная", current: "Приёмная комиссия" },
    pageTitle: "Приёмная комиссия",
    sectionTitle: "Добро пожаловать в приёмную комиссию",
    introText1: "Мы рады приветствовать будущих учеников и их родителей! Наша приёмная комиссия поможет вам пройти все этапы поступления, ответит на вопросы и предоставит подробную информацию об обучении. Мы стремимся сделать процесс поступления максимально удобным, прозрачным и дружелюбным, чтобы каждая семья чувствовала поддержку и внимание с первых шагов.",
    introText2: "Поступление в нашу школу — это первый шаг к успешному образовательному пути. Мы создаём условия, где каждый ребёнок может раскрыть свой потенциал, проявить свои способности и интерес к обучению. Особое внимание уделяется индивидуальному подходу, развитию критического мышления, цифровой грамотности и навыков общения.",
    introText3: "Образовательная программа школы сочетает в себе лучшие традиции классического образования и современные инновационные методики. Мы уделяем большое внимание изучению иностранных языков, информационных технологий и развитию творческого мышления. Благодаря этому наши ученики успешно участвуют в олимпиадах, конкурсах и научных проектах.",
    introText4: "Мы уверены, что выбор школы — это важный шаг для каждой семьи. Поэтому мы готовы помочь вам принять правильное решение и сделать первые шаги к успешному будущему вашего ребёнка вместе с нами.",
    stepsTitle: "Этапы поступления",
    steps: [
      { title: "1. Подача заявки", desc: "Подайте заявление в приёмную комиссию школы и предоставьте необходимые документы лично." },
      { title: "2. Собеседование", desc: "Проводится краткое интервью с родителями и ребёнком, чтобы познакомиться и определить уровень готовности." },
      { title: "3. Решение комиссии", desc: "После рассмотрения документов и результатов собеседования комиссия принимает решение о зачислении." }
    ],
    faqTitle: "Часто задаваемые вопросы",
    faq: [
      { q: "С какого возраста принимаются дети?", a: "Мы принимаем учеников начиная с 1-го класса — обычно с 6,5–7 лет." },
      { q: "Какие документы нужны для поступления?", a: "Необходимо предоставить заявление родителей, свидетельство о рождении ребёнка, медицинскую карту и две фотографии 3×4." },
      { q: "Когда начинается приём документов?", a: "Приём документов в первый класс начинается с 1 апреля и продолжается до конца мая. Для других классов — при наличии свободных мест." },
      { q: "Проводится ли вступительное собеседование?", a: "Да, для всех поступающих проводится краткое собеседование с педагогом и психологом, чтобы определить уровень подготовки ребёнка." },
      { q: "Есть ли подготовительные курсы?", a: "Да, при школе работают подготовительные группы, где дети знакомятся с основами чтения, письма и математики в игровой форме." },
      { q: "Как формируются классы?", a: "Классы формируются с учётом возраста, уровня знаний и индивидуальных особенностей детей." },
      { q: "Можно ли выбрать профиль?", a: "Да, начиная с 5-го класса, ученики могут выбирать углублённое изучение предметов — английского языка, информатики или математики." }
    ]
  },
  kk: {
    breadcrumbs: { home: "Басты бет", current: "Қабылдау комиссиясы" },
    pageTitle: "Қабылдау комиссиясы",
    sectionTitle: "Қабылдау комиссиясына қош келдіңіздер",
    introText1: "Біз болашақ оқушылар мен олардың ата-аналарын қарсы алуға қуаныштымыз! Біздің қабылдау комиссиясы оқуға түсудің барлық кезеңдерінен өтуге көмектеседі, сұрақтарға жауап береді және оқу туралы толық ақпарат береді. Біз әрбір отбасы алғашқы қадамдардан бастап қолдау мен назарды сезінуі үшін оқуға түсу процесін барынша ыңғайлы, ашық және мейірімді етуге тырысамыз.",
    introText2: "Біздің мектепке түсу — табысты білім беру жолындағы алғашқы қадам. Біз әр бала өз әлеуетін аша алатын, өз қабілеттері мен оқуға деген қызығушылығын көрсете алатын жағдайлар жасаймыз. Жеке тәсілге, сыни ойлауды, цифрлық сауаттылықты және қарым-қатынас дағдыларын дамытуға ерекше көңіл бөлінеді.",
    introText3: "Мектептің білім беру бағдарламасы классикалық білім берудің үздік дәстүрлері мен заманауи инновациялық әдістемелерді біріктіреді. Біз шет тілдерін, ақпараттық технологияларды үйренуге және шығармашылық ойлауды дамытуға үлкен көңіл бөлеміз. Осының арқасында біздің оқушылар олимпиадаларға, конкурстарға және ғылыми жобаларға табысты қатысады.",
    introText4: "Мектеп таңдау — әр отбасы үшін маңызды қадам екеніне сенімдіміз. Сондықтан біз сізге дұрыс шешім қабылдауға және балаңыздың табысты болашағына алғашқы қадамдарды бізбен бірге жасауға көмектесуге дайынбыз.",
    stepsTitle: "Қабылдау кезеңдері",
    steps: [
      { title: "1. Өтінім беру", desc: "Мектептің қабылдау комиссиясына өтініш беріңіз және қажетті құжаттарды жеке тапсырыңыз." },
      { title: "2. Сұхбаттасу", desc: "Танысу және дайындық деңгейін анықтау үшін ата-аналармен және баламен қысқаша сұхбат жүргізіледі." },
      { title: "3. Комиссия шешімі", desc: "Құжаттарды және сұхбат нәтижелерін қарастырғаннан кейін комиссия оқуға қабылдау туралы шешім қабылдайды." }
    ],
    faqTitle: "Жиі қойылатын сұрақтар",
    faq: [
      { q: "Балалар неше жастан қабылданады?", a: "Біз оқушыларды 1-сыныптан бастап қабылдаймыз — әдетте 6,5–7 жастан." },
      { q: "Оқуға түсу үшін қандай құжаттар қажет?", a: "Ата-ананың өтініші, баланың туу туралы куәлігі, медициналық карта және 3×4 көлеміндегі екі фотосурет қажет." },
      { q: "Құжаттарды қабылдау қашан басталады?", a: "Бірінші сыныпқа құжаттарды қабылдау 1 сәуірден басталып, мамыр айының соңына дейін жалғасады. Басқа сыныптар үшін — бос орындар болған жағдайда." },
      { q: "Қабылдау сұхбаты жүргізіле ме?", a: "Иә, барлық үміткерлер үшін баланың дайындық деңгейін анықтау мақсатында педагог және психологпен қысқаша сұхбат жүргізіледі." },
      { q: "Дайындық курстары бар ма?", a: "Иә, мектеп жанында дайындық топтары жұмыс істейді, онда балалар ойын түрінде оқу, жазу және математика негіздерімен танысады." },
      { q: "Сыныптар қалай құрылады?", a: "Сыныптар балалардың жасын, білім деңгейін және жеке ерекшеліктерін ескере отырып құрылады." },
      { q: "Оқу бағытын таңдауға бола ма?", a: "Иә, 5-сыныптан бастап оқушылар пәндерді — ағылшын тілін, информатиканы немесе математиканы тереңдетіп оқуды таңдай алады." }
    ]
  }
};

export default function Committee() {
  const [openFAQ, setOpenFAQ] = useState(null);
  const [lang, setLang] = useState(localStorage.getItem('app_lang') || 'ru');
  const t = translations[lang];

  // Синхронизация языка при изменении в Header
  useEffect(() => {
    const handleStorageChange = () => {
      setLang(localStorage.getItem('app_lang') || 'ru');
    };
    const interval = setInterval(handleStorageChange, 500);
    return () => clearInterval(interval);
  }, []);

  const toggleFAQ = (index) => {
    setOpenFAQ(openFAQ === index ? null : index);
  };

  return (
    <Header>
      <div className={styles.container}>
        <section
          className={styles.pageHeader}
          style={{ backgroundImage: `url('/images/elementary-school-classroom-design.jpg')` }}
        >
          <div className={styles.overlay}>
            <div className={styles.main}>
              <div className={styles.inner}>
                <nav className={styles.breadcrumbs}>
                  <ol>
                    <li><Link to="/">{t.breadcrumbs.home}</Link></li>
                    <li>/</li>
                    <li>{t.breadcrumbs.current}</li>
                  </ol>
                </nav>
                <h1 className={styles.pageTitle}>{t.pageTitle}</h1>
              </div>
            </div>
          </div>
        </section>

        <section className={styles.committeeSection}>
          <div className={styles.sectionContent}>
            <h2>{t.sectionTitle}</h2>
            <p>{t.introText1}</p>
            <p>{t.introText2}</p>
            <p>{t.introText3}</p>
            <p>{t.introText4}</p>
          </div>
        </section>

        <section className={styles.cardsSection}>
          <h2>{t.stepsTitle}</h2>
          <div className={styles.cardsGrid}>
            <div className={styles.card}>
              <div className={styles.iconWrapper}>
                <FaFileAlt className={styles.icon} />
              </div>
              <h3>{t.steps[0].title}</h3>
              <p>{t.steps[0].desc}</p>
            </div>

            <div className={styles.card}>
              <div className={styles.iconWrapper}>
                <FaComments className={styles.icon} />
              </div>
              <h3>{t.steps[1].title}</h3>
              <p>{t.steps[1].desc}</p>
            </div>

            <div className={styles.card}>
              <div className={styles.iconWrapper}>
                <FaCheckCircle className={styles.icon} />
              </div>
              <h3>{t.steps[2].title}</h3>
              <p>{t.steps[2].desc}</p>
            </div>
          </div>
        </section>

        <section className={styles.faqSection} style={{ marginTop: 50 }}>
          <h2>{t.faqTitle}</h2>
          <div className={styles.faqList}>
            {t.faq.map((item, index) => (
              <div
                key={index}
                className={`${styles.faqItem} ${openFAQ === index ? styles.open : ""}`}
                onClick={() => toggleFAQ(index)}
              >
                <h3>{item.q}</h3>
                {openFAQ === index && <p>{item.a}</p>}
              </div>
            ))}
          </div>
        </section>
      </div>
    </Header>
  );
}